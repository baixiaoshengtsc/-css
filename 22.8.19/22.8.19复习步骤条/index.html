<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>22.8.19(复习步骤条)</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <div class="container_circle">
      <div class="progress" id="progress"></div>
      <div class="circle active">1</div>
      <div class="circle">2</div>
      <div class="circle">3</div>
      <div class="circle">4</div>
    </div>
    <div class="container_btn">
      <button id="prev">上一个</button>
      <button id="next">下一个</button>
    </div>
  </div>
</body>
</html>
<script>
  const circles = document.querySelectorAll('.circle')
  const progress = document.getElementById('progress')
  const prev = document.getElementById('prev')
  const next = document.getElementById('next')

  let index = 1

  prev.addEventListener('click',function(){
    index--
    next.disabled = false
    setProgress()
    removeProgressActive()
    if(index == 1) {
      prev.disabled = true
    }
  })
  next.addEventListener('click',function(){
    index++
    prev.disabled = false
    setProgress()
    addProgressActive()
    if(index==circles.length){
      next.disabled = true
    }
  })
  function removeProgressActive() {
    circles.forEach((circle,i) => {
      if(i>=index) {
        circle.classList.remove('active')
      }
    })
  }
  function addProgressActive() {
    circles.forEach((circle,i) => {
      if(i<index) {
        circle.classList.add('active')
      }
    })
  }
  function setProgress() {
    const w = (index-1)/(circles.length-1)*100 - 1
    progress.style.width = w<0?0:w + '%'
    // console.log((index-1)/(circles.length-1)*100 - 1 +'%')
  }
</script>