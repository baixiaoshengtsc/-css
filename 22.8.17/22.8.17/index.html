<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>22.8.17(步骤条)</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>
	<div id="app">
		<div class="container">
			<div class="progress_container">
				<div class="progress" id="progress"></div>
				<div class="circle active">1</div>
				<div class="circle">2</div>
				<div class="circle">3</div>
				<div class="circle">4</div>
			</div>
			<div class="progress_btnGroup">
				<button class="btn" id="pre">上一个</button>
				<button class="btn" id="next">下一个</button>
			</div>
		</div>
	</div>
</body>

</html>
<script>
	const progress = document.getElementById('progress')
	const pre = document.getElementById('pre')
	const next = document.getElementById('next')
	const circles = document.querySelectorAll('.circle')

	let index = 1
	pre.addEventListener('click', (e) => {
		// controlBtn()
		circles.forEach(circle => {
			if (circle.innerHTML == index) {
				// if(index == 1) {
				// 	progress.style.width = 0 + '%'
				// 	console.log('@@@')
				// }else{
				circle.classList.remove('active')

				if (index == 2) {
					progress.style.width = 0
					index--
					pre.disabled = true
					pre.classList.add('disabled')
					console.log(index)
				} else {
					index--
					progress.style.width = (index - 1) / (circles.length - 1) * 100 - 1 + '%'
					next.disabled = false
					next.classList.remove('disabled')
					// console.log(index)
				}

				// }
			}
		})
		// console.log(circles)
	})

	next.addEventListener('click', (e) => {
		// controlBtn()
		if (index == circles.length) {
			next.disabled = true
			next.classList.add('disabled')
			return
		} else {
			index++
			circles.forEach(circle => {
				if (circle.innerHTML == index) {
					circle.classList.add('active')
					// console.log(index)
					// console.log(((index) / circles.length*100%))
					progress.style.width = (index - 1) / (circles.length - 1) * 100 - 1 + '%'

					pre.disabled = false

					pre.classList.remove('disabled')

				}
			})
		}
	})

	function controlBtn() {
		if (index == 1) {
			pre.disabled = true
			pre.classList.add('disabled')
		} else if (index == 3) {
			next.disabled = true
			next.classList.add('disabled')
		} else {
			pre.disabled = false
			next.disabled = false
			pre.classList.remove('disabled')
			next.classList.remove('disabled')
		}
	}
</script>